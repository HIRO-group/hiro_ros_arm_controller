<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>hiro_ros_arm_controller: zScore.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">zScore.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="zScore_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor"> #pragma once</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"> #include &lt;string&gt;</span> </div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor"> #include &lt;vector&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor"> #include &lt;numeric&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor"> #include &lt;tuple&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor"> #include &lt;cmath&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor"> #include &lt;algorithm&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor"> #include &quot;std_msgs/Float64.h&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor"> #include &lt;ros/ros.h&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="classzScore.html">   15</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classzScore.html">zScore</a>{</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="keyword">public</span>:</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="classzScore.html#a8912d3b8d3a0dfef668846d132bf144b">   17</a></span>&#160;      <span class="keywordtype">int</span> <a class="code" href="classzScore.html#a8912d3b8d3a0dfef668846d132bf144b">lag</a> = 500; <span class="comment">// How many previous values are we talking into account for data smoothing</span></div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="classzScore.html#a01ec17929dab497ebcc2d5aca2d61300">   18</a></span>&#160;      <span class="keywordtype">float</span> <a class="code" href="classzScore.html#a01ec17929dab497ebcc2d5aca2d61300">threshold</a> = 5; <span class="comment">// Number of std deviations needed to show a signal</span></div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="classzScore.html#a62784fc9e59233154d9fe1f455199fa8">   19</a></span>&#160;      <span class="keywordtype">float</span> <a class="code" href="classzScore.html#a62784fc9e59233154d9fe1f455199fa8">influence</a> = 0; <span class="comment">// How much weight do we give to signaled values</span></div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="classzScore.html#a22d333b39110c58ff6a90dc2455c4901">   20</a></span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="classzScore.html#a22d333b39110c58ff6a90dc2455c4901">publish_values</a> = <span class="keyword">true</span>; <span class="comment">// Do you want these values continuously published in ros?</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;      </div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;      <span class="comment">// float max_threshold = 6.7;</span></div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="classzScore.html#a6016d9371dc1b9973f37e217c1accfcc">   23</a></span>&#160;      <span class="keywordtype">float</span> <a class="code" href="classzScore.html#a6016d9371dc1b9973f37e217c1accfcc">max_threshold</a> = 6.7;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;      <span class="comment">// float max_threshold = 8;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;      std::tuple&lt;bool, float&gt; <a class="code" href="classzScore.html#a53301d6fd645cfbf82112884116e6bcd">getSignal</a>(<span class="keywordtype">double</span> new_value);</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="classzScore.html#af22a118b76d950e5217c4aac70b5414e">updateThreshold</a>(<span class="keywordtype">double</span> velocity);</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;      <span class="comment">// Constructors</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;      <a class="code" href="classzScore.html#a7f79e090c73f07071e2df68d2ee1f362">zScore</a>();</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;      <a class="code" href="classzScore.html#a7f79e090c73f07071e2df68d2ee1f362">zScore</a>(ros::NodeHandle &amp; node_handle, std::string <a class="code" href="classzScore.html#adeaf3ae6be32115d93a4886b15aff12a">topic_prefix</a>);</div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classzScore.html#abaf9d316119e6722fcfbf8ca8c6cfad4">   31</a></span>&#160;      <span class="keywordtype">double</span> <a class="code" href="classzScore.html#abaf9d316119e6722fcfbf8ca8c6cfad4">current_stdDev</a>;</div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="classzScore.html#aafb07af538e9eb9cb3fb34ebe91f897b">   32</a></span>&#160;      <span class="keywordtype">double</span> <a class="code" href="classzScore.html#aafb07af538e9eb9cb3fb34ebe91f897b">current_mean</a>;</div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classzScore.html#a368a2c4963d94d56376c3681b5fb21df">   33</a></span>&#160;      <span class="keywordtype">double</span> <a class="code" href="classzScore.html#a368a2c4963d94d56376c3681b5fb21df">current_signal</a>;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classzScore.html#a6016559694bec53a2272e5974a1dc35e">   34</a></span>&#160;      <span class="keywordtype">double</span> <a class="code" href="classzScore.html#a6016559694bec53a2272e5974a1dc35e">current_raw_value</a>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keyword">private</span>:</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classzScore.html#adeaf3ae6be32115d93a4886b15aff12a">   39</a></span>&#160;      std::string <a class="code" href="classzScore.html#adeaf3ae6be32115d93a4886b15aff12a">topic_prefix</a> = <span class="stringliteral">&quot;not_set&quot;</span>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="classzScore.html#a180d3cd399ea88098c46b5bb5a677585">getStdDev</a>(std::vector&lt;double&gt; data);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="classzScore.html#abda423ab54517a2851d4ef6b76672f4a">getMean</a>(std::vector&lt;double&gt; data);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;      <span class="keywordtype">void</span> <a class="code" href="classzScore.html#ac4dd42e616b457375950ae1a88c3977e">publishValues</a>();</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classzScore.html#a6049be51b898eee63082ae06af2963e7">   43</a></span>&#160;      std::vector&lt;double&gt; <a class="code" href="classzScore.html#a6049be51b898eee63082ae06af2963e7">lag_values</a>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      <span class="comment">// Create all publishers</span></div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classzScore.html#a8f70b7194c372aa391ce517fb2f22674">   46</a></span>&#160;      ros::Publisher <a class="code" href="classzScore.html#a8f70b7194c372aa391ce517fb2f22674">pub_mean</a>;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classzScore.html#ad836694c9a161cd764d461fafbe95640">   47</a></span>&#160;      ros::Publisher <a class="code" href="classzScore.html#ad836694c9a161cd764d461fafbe95640">pub_positive_threshold</a>;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classzScore.html#a645ca77fef44f7f53025e98d2e755fc4">   48</a></span>&#160;      ros::Publisher <a class="code" href="classzScore.html#a645ca77fef44f7f53025e98d2e755fc4">pub_negative_threshold</a>;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classzScore.html#a435a5fe6154f99a82a170c9e5ca74361">   49</a></span>&#160;      ros::Publisher <a class="code" href="classzScore.html#a435a5fe6154f99a82a170c9e5ca74361">pub_signal</a>;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classzScore.html#a7f646056145cadb994ca49331d6333c5">   50</a></span>&#160;      ros::Publisher <a class="code" href="classzScore.html#a7f646056145cadb994ca49331d6333c5">pub_raw_value</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  };</div><div class="ttc" id="classzScore_html_ac4dd42e616b457375950ae1a88c3977e"><div class="ttname"><a href="classzScore.html#ac4dd42e616b457375950ae1a88c3977e">zScore::publishValues</a></div><div class="ttdeci">void publishValues()</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8cpp_source.html#l00076">zScore.cpp:76</a></div></div>
<div class="ttc" id="classzScore_html_a368a2c4963d94d56376c3681b5fb21df"><div class="ttname"><a href="classzScore.html#a368a2c4963d94d56376c3681b5fb21df">zScore::current_signal</a></div><div class="ttdeci">double current_signal</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00033">zScore.h:33</a></div></div>
<div class="ttc" id="classzScore_html_a6016559694bec53a2272e5974a1dc35e"><div class="ttname"><a href="classzScore.html#a6016559694bec53a2272e5974a1dc35e">zScore::current_raw_value</a></div><div class="ttdeci">double current_raw_value</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00034">zScore.h:34</a></div></div>
<div class="ttc" id="classzScore_html_a645ca77fef44f7f53025e98d2e755fc4"><div class="ttname"><a href="classzScore.html#a645ca77fef44f7f53025e98d2e755fc4">zScore::pub_negative_threshold</a></div><div class="ttdeci">ros::Publisher pub_negative_threshold</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00048">zScore.h:48</a></div></div>
<div class="ttc" id="classzScore_html_abda423ab54517a2851d4ef6b76672f4a"><div class="ttname"><a href="classzScore.html#abda423ab54517a2851d4ef6b76672f4a">zScore::getMean</a></div><div class="ttdeci">double getMean(std::vector&lt; double &gt; data)</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8cpp_source.html#l00098">zScore.cpp:98</a></div></div>
<div class="ttc" id="classzScore_html_a435a5fe6154f99a82a170c9e5ca74361"><div class="ttname"><a href="classzScore.html#a435a5fe6154f99a82a170c9e5ca74361">zScore::pub_signal</a></div><div class="ttdeci">ros::Publisher pub_signal</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00049">zScore.h:49</a></div></div>
<div class="ttc" id="classzScore_html_a8912d3b8d3a0dfef668846d132bf144b"><div class="ttname"><a href="classzScore.html#a8912d3b8d3a0dfef668846d132bf144b">zScore::lag</a></div><div class="ttdeci">int lag</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00017">zScore.h:17</a></div></div>
<div class="ttc" id="classzScore_html_af22a118b76d950e5217c4aac70b5414e"><div class="ttname"><a href="classzScore.html#af22a118b76d950e5217c4aac70b5414e">zScore::updateThreshold</a></div><div class="ttdeci">double updateThreshold(double velocity)</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8cpp_source.html#l00026">zScore.cpp:26</a></div></div>
<div class="ttc" id="classzScore_html_aafb07af538e9eb9cb3fb34ebe91f897b"><div class="ttname"><a href="classzScore.html#aafb07af538e9eb9cb3fb34ebe91f897b">zScore::current_mean</a></div><div class="ttdeci">double current_mean</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00032">zScore.h:32</a></div></div>
<div class="ttc" id="classzScore_html_a6016d9371dc1b9973f37e217c1accfcc"><div class="ttname"><a href="classzScore.html#a6016d9371dc1b9973f37e217c1accfcc">zScore::max_threshold</a></div><div class="ttdeci">float max_threshold</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00023">zScore.h:23</a></div></div>
<div class="ttc" id="classzScore_html_a7f646056145cadb994ca49331d6333c5"><div class="ttname"><a href="classzScore.html#a7f646056145cadb994ca49331d6333c5">zScore::pub_raw_value</a></div><div class="ttdeci">ros::Publisher pub_raw_value</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00050">zScore.h:50</a></div></div>
<div class="ttc" id="classzScore_html_a53301d6fd645cfbf82112884116e6bcd"><div class="ttname"><a href="classzScore.html#a53301d6fd645cfbf82112884116e6bcd">zScore::getSignal</a></div><div class="ttdeci">std::tuple&lt; bool, float &gt; getSignal(double new_value)</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8cpp_source.html#l00038">zScore.cpp:38</a></div></div>
<div class="ttc" id="classzScore_html_a8f70b7194c372aa391ce517fb2f22674"><div class="ttname"><a href="classzScore.html#a8f70b7194c372aa391ce517fb2f22674">zScore::pub_mean</a></div><div class="ttdeci">ros::Publisher pub_mean</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00046">zScore.h:46</a></div></div>
<div class="ttc" id="classzScore_html_a22d333b39110c58ff6a90dc2455c4901"><div class="ttname"><a href="classzScore.html#a22d333b39110c58ff6a90dc2455c4901">zScore::publish_values</a></div><div class="ttdeci">bool publish_values</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00020">zScore.h:20</a></div></div>
<div class="ttc" id="classzScore_html_a180d3cd399ea88098c46b5bb5a677585"><div class="ttname"><a href="classzScore.html#a180d3cd399ea88098c46b5bb5a677585">zScore::getStdDev</a></div><div class="ttdeci">double getStdDev(std::vector&lt; double &gt; data)</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8cpp_source.html#l00088">zScore.cpp:88</a></div></div>
<div class="ttc" id="classzScore_html"><div class="ttname"><a href="classzScore.html">zScore</a></div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00015">zScore.h:15</a></div></div>
<div class="ttc" id="classzScore_html_a62784fc9e59233154d9fe1f455199fa8"><div class="ttname"><a href="classzScore.html#a62784fc9e59233154d9fe1f455199fa8">zScore::influence</a></div><div class="ttdeci">float influence</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00019">zScore.h:19</a></div></div>
<div class="ttc" id="classzScore_html_ad836694c9a161cd764d461fafbe95640"><div class="ttname"><a href="classzScore.html#ad836694c9a161cd764d461fafbe95640">zScore::pub_positive_threshold</a></div><div class="ttdeci">ros::Publisher pub_positive_threshold</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00047">zScore.h:47</a></div></div>
<div class="ttc" id="classzScore_html_adeaf3ae6be32115d93a4886b15aff12a"><div class="ttname"><a href="classzScore.html#adeaf3ae6be32115d93a4886b15aff12a">zScore::topic_prefix</a></div><div class="ttdeci">std::string topic_prefix</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00039">zScore.h:39</a></div></div>
<div class="ttc" id="classzScore_html_a7f79e090c73f07071e2df68d2ee1f362"><div class="ttname"><a href="classzScore.html#a7f79e090c73f07071e2df68d2ee1f362">zScore::zScore</a></div><div class="ttdeci">zScore()</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8cpp_source.html#l00018">zScore.cpp:18</a></div></div>
<div class="ttc" id="classzScore_html_a6049be51b898eee63082ae06af2963e7"><div class="ttname"><a href="classzScore.html#a6049be51b898eee63082ae06af2963e7">zScore::lag_values</a></div><div class="ttdeci">std::vector&lt; double &gt; lag_values</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00043">zScore.h:43</a></div></div>
<div class="ttc" id="classzScore_html_a01ec17929dab497ebcc2d5aca2d61300"><div class="ttname"><a href="classzScore.html#a01ec17929dab497ebcc2d5aca2d61300">zScore::threshold</a></div><div class="ttdeci">float threshold</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00018">zScore.h:18</a></div></div>
<div class="ttc" id="classzScore_html_abaf9d316119e6722fcfbf8ca8c6cfad4"><div class="ttname"><a href="classzScore.html#abaf9d316119e6722fcfbf8ca8c6cfad4">zScore::current_stdDev</a></div><div class="ttdeci">double current_stdDev</div><div class="ttdef"><b>Definition:</b> <a href="zScore_8h_source.html#l00031">zScore.h:31</a></div></div>
</div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/hiro_ros_arm_controller">hiro_ros_arm_controller</a><br />
Author(s): </br />
<small>autogenerated on Thu Feb 4 2021 03:06:17</small>
</div>
</body>
</html>
